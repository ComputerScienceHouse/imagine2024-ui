# Bits n' Bytes UI Kivy Definitions
# Author: Wilson McDade
###########################


###########################
#
#   Define Screens:
#
###########################

ScreenManager:
    id: sm

    StartScreen:
        md_bg_color: self.theme_cls.backgroundColor
        name: 'Start'

        RelativeLayout:

            # Still working on this, lets leave it out for now
            ImageButton:
                source: 'images/tapIcon.png'
                text: 'Tap card to start'
                x: 110


            # How can we make this bigger?
            MDIconButton:
                pos_hint: {'center_x': 0.9, 'center_y': 0.9}
                icon: 'information-outline'
                style: 'filled'
                on_press:
                    root.transition.direction = 'up'
                    root.current = 'Info'

            Image:
                source: 'images/logo.png'

            ### Remove this once NFC works :tm:
            MDButton:
                pos_hint: {'center_x': 0.5, 'center_y': 0.2}
                style: 'filled'
                on_press:
                    # Change transition direction
                    root.transition.direction = 'left'
                    # Set current screen to Cart
                    root.current = 'Cart'
                
                MDButtonText:
                    text:'Go to Cart'

    CartScreen:
        md_bg_color: self.theme_cls.backgroundColor
        name: 'Cart'

        # This should be a scrollview pls make this a scrollview
        BoxLayout:
            orientation: 'vertical'
            width: 2*root.width/3

            CartItem:
                title: 'Jolt Soda'
                source: 'images/oof.png'
                price: '3.00'
                quantity: '3'

            CartItem:
                title: 'Jolt Soda'
                source: 'images/oof.png'
                price: '3.00'
                quantity: '3'

            CartItem:
                title: 'Jolt Soda'
                source: 'images/oof.png'
                price: '3.00'
                quantity: '3'

            CartItem:
                title: 'Jolt Soda'
                source: 'images/oof.png'
                price: '3.00'
                quantity: '3'

        ### Do not leave this in
        MDButton:
            pos_hint: {'center_x': 0.5, 'center_y': 0.2}
            style: 'filled'
            on_press:
                root.transition.direction = 'right'
                root.current = 'Start'

            MDButtonText:
                text:'Go to Start'

    InfoScreen:
        md_bg_color: self.theme_cls.backgroundColor
        name: 'Info'

        MDButton:
            style: 'filled'
            on_press:
                root.transition.direction = 'down'
                root.current = 'Start'
            
            MDButtonText:
                text:'Back to Start'

        GridLayout:
            cols:2

            MemberCard:
                name: 'Wilson'
                job_title: 'Cool Guy'
                major: 'CS'

            MemberCard:
                name: 'Sahil'
                job_title: 'Cool Guy'
                major: 'CS'

            MemberCard:
                name: 'Jason'
                job_title: 'Cool Guy'
                major: 'CS'

            MemberCard:
                name: 'Isaac'
                job_title: 'Cool Guy'
                major: 'CS'

    AttractScreen:
        name: 'Attract'


###########################
#
#   Define Custom Widgets:
#
###########################

<ImageButton>
    size_hint: (0.611, 0.107)

    # I think this is the only way to get a rounded rectangle on the screen.
    #   It doesn't need to be a button so this should be fine right
    canvas:
        Color:
            rgb: 0.42, 0.0, 0.39
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [(20, 20), (20, 20), (20, 20), (20, 20)]

    Image:
        x: self.parent.x + 140
        y: self.parent.y + 8
        source: root.source

        MDLabel:
            text: root.text

<CartItem>
    size: "144dp", "170dp"

    Image:
        source: root.source

    MDLabel:
        text: root.title

    MDLabel:
        text: root.price

    MDLabel:
        font_style: 'Display'
        text: root.quantity

<MemberCard>
    orientation: 'vertical'
    size_hint: None, None
    size: "144dp", "170dp"
        
    MDLabel:
        font_style: "Display"
        role: "small"
        text: root.name
        color: "black"
        halign: "center"
        padding: "2dp", "2dp"

    MDLabel:
        font_style: "Title"
        role: "small"
        text: root.job_title
        color: "black"
        halign: "center"
        padding: "4dp", "4dp"

    MDLabel:
        font_style: "Title"
        role: "medium"
        text: root.major
        color: "black"
        halign: "center"
        padding: "4dp", "4dp"